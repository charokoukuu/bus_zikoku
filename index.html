<html lang="ja">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <script src="lib/onsenui/js/onsenui.min.js"></script>

    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <meta charset="utf-8">
    <title>バス時刻表</title>

    <style>
        #genzai {

            border-radius: 10px;
            box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.2);

        }

        .iro {
            background-color: red;
        }

        #waku {
            border-radius: 30px;
            box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.2);
        }

        #radio {
            width: 50%;
            box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.2);
            opacity: 0.8;
        }
    </style>
</head>

<body>

    <ons-page class="iro">
        <ons-toolbar>
            <div class="right">
                <ons-toolbar-button onclick="kousin()" class="kousin">更新</ons-toolbar-button>
            </div>
            <div class="center" id="toolbar-title"></div>


            </ons-button>
        </ons-toolbar>
        <ons-tabbar position="under">
            <ons-tab label="HOME" page="tab1.html" active>

            </ons-tab>
            <ons-tab label="時刻表" page="tab2.html">
            </ons-tab>
        </ons-tabbar>
    </ons-page>

    <ons-template id="tab1.html">
        <ons-page id="first-page">

            <center>
                <div class="alert alert-success" role="alert" id="hukidasi">-----</div>

                <h1 class="alert alert-primary py-3" id="genzai" role="alert">Now Loading...</h1>
                <div id="hyo">
                    <div class="table-responsive bg-info " id="waku">

                        <table class="table table-bordered mt-3 bg-dark">
                            <thead>
                                <tr>
                                    <th style="width:25%;" class="text-center"></th>
                                    <th class="text-center text-light">ダイヤ</th>
                                </tr>

                            </thead>
                            <tbody>
                                <thead>
                                    <tr>
                                        <td class="text-center text-muted" id="itiran">---</td>
                                        <td class="text-center text-info" id="daiya1">------------------------------------</td>
                                    </tr>
                                </thead>
                                <thead>
                                    <tr>
                                        <td class="text-center text-muted" id="yobi">---</td>
                                        <td class="text-center text-info" id="daiya2">------------------------------------</td>
                                    </tr>
                                </thead>
                            </tbody>
                        </table>
                    </div>
                </div>
                <h3 id="yobi"></h3>

                <form name="form1" action="">
                    <ons-list class="card border-info" id="radio">
                        <ons-list-item tappable>
                            <label class="left">
                                <ons-radio name="RadioGroup1" input-id="radio1" onchange="onRadioButtonChange();">
                            </label>
                            <label for="radio1" class="center">

                                行き

                            </label>
                        </ons-list-item>
                        <ons-list-item tappable>
                            <label class="left">
                                <ons-radio name="RadioGroup1" input-id="radio2" onchange="onRadioButtonChange();">
                            </label>
                            <label for="radio2" class="center">
                                帰り
                            </label>
                        </ons-list-item>
                    </ons-list>
                </form>

                <div id="output"></div>


            </center>

        </ons-page>
    </ons-template>

    <ons-template id="tab2.html">
        <ons-page id="second-page">
            <p style="text-align: center;">
                This is the second page.
            </p>
        </ons-page>
    </ons-template>
</body>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

<script>
    var shuu;

    document.addEventListener('show', function (event) {
        var page = event.target;
        var titleElement = document.querySelector('#toolbar-title');

        if (page.matches('#first-page')) {
            titleElement.innerHTML = 'HOME';
        } else if (page.matches('#second-page')) {
            titleElement.innerHTML = '時刻表';
        }
    });
    $(function () {
        $('#hyo').hide();
        $('#radio').hide();
        $('#radio').fadeIn(2800);
        $('#hyo').show(1000);

        $("#hukidasi").hide();
        $("#hukidasi").toggle(2700);

    });
    function ikou(shuu) {
        zikoku.textContent = hour + 6 + "時"; daiya1.textContent = shuu[hour]; yobi.textContent = hour + 7 + "時"; daiya2.textContent = shuu[hour + 1];
    }
    function hudan(shuu) {
        zikoku.textContent = hour + 6 + "時"; daiya1.textContent = shuu[hour];
    }
    function igai() {
        daiya1.textContent = "バスのダイヤはありません"; daiya2.textContent = "バスのダイヤはありません"; daiya1.style.color = 'red'; daiya2.style.color = "red";
    }
    var heizitu = [
        ["15", "35", "55"],
        ["00", "05", "10", "14", "18", "22", "26", "29", "33"　, "36", "40"　, "43", "47", "50", "55"　],
        ["00"　, "05"　, "10"　, "15"　, "25"　, "35"　, "45"　　],
        [　"00"　, "15"　, "30"　　, "45"],
        ["00"　, "15"　, "30"　, "45"],
        ["00"　, "15"　, "30"　, "45"],
        ["00"　, "15"　, "30"　, "45"],
        ["00"　, "15"　, "30"　, "45"],
        ["00"　, "15"　, "30"　, "45"],
        ["00"　, "15"　, "30"　, "40", "50"],
        [　"00"　, "10"　, "20"　, "30"　, "40"　, "50"　],
        ["00", "10"　, "20"　, "30"　, "38"　, "45"　, "53"　],
        ["00"　, "08", "15"　, "23", "30"　, "38"　, "45"　, "53"],
        ["00"　, "08", "15"　, "23", "30"　, "38"　, "45"　, "53"],
        ["00"　, "08"　, "16"　, "24"　, "32"　, "42"　, "52"　],
        ["00", "12"　, "20"　, "28"　, "36"　, "44"　, "52"　],
        ["02"　, "12"　, "22"　, "32"　, "44"　, "59"　],
        ["14", "30", "45"],
        ["05"]
    ],
        youbi = ["日", "月", "火", "水", "木", "金", "土"],
        doyou = [
            ["20", "55"],
            ["15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "20", "40"],
            ["00", "25"],
            ["05"]

        ],
        kyuzitu = [
            ["20", "55"],
            ["15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],//11
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "15", "30", "45"],
            ["00", "12", "24", "36", "48"],//16
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "12", "24", "36", "48"],
            ["00", "20", "40"],
            ["00", "25"],

        ],
        heizitu2 = [
            [53],//5
            [03, 13, 23, 30, 37, 42, 47, 52, 56,],//6
            [00, 04, 08, 11, 15, 18, 22, 25, 29, 32, 36, 40, 44, 48, 52, 56],//7
            [00, 05, 10, 15, 20, 25, 30, 35, 40, 48, 56],//8
            [06, 16, 26, 36, 46, 56],//9
            [06, 16, 26, 41, 56],//10
            [11, 26, 41, 56],//11
            [11, 26, 41, 56],//12
            [11, 26, 41, 56],//13
            [11, 26, 41, 56],//14
            [11, 24, 39, 54],//15
            [04, 14, 24, 34, 44, 54],//16
            [04, 14, 24, 34, 44, 54],//17
            [02, 09, 17, 24, 32, 39, 47, 54],//18
            [02, 09, 17, 24, 39, 54],//19
            [24, 54],//20
            [24, 54],//21
            [54],//22

        ],

        kyuzitu2 = [
            [03, 23, 38, 48, 58],
            [05, 13, 20, 28, 35, 43, 50, 58],
            [05, 15, 25, 35, 45, 55],
            [05, 15, 25, 35, 45, 55],
            [05, 15, 25, 35, 45, 55],
            [05, 15, 25, 35, 45, 55],
            [10, 25, 40, 55],
            [10, 25, 40, 55],
            [10, 25, 40, 55],
            [10, 25, 40, 55],
            [10, 25, 40, 55],
            [10, 25, 40, 55],
            [10, 25, 40],
            [13, 49],
            [13, 49],
            [13],
            [03],
            [03]
        ],
        shukuzitu = [
            [24],//9
            [8],//10
            [3, 23],//11
            [24],//12
            [14],//1
            [11],
            [21]
        ],
        namae = [
            ["秋分の日 振替休日"],
            ["体育の日"],
            ["文化の日", "勤労感謝の日"],
            ["天皇誕生日　振替休日"],
            ["成人の日"],
            ["建国記念日"],
            ["春分の日"]
        ];
    var zikan, minutes, second, hour, day, genzai, zikoku, yobi, month_keisan, hukidasi, daiya1, daiya2, first, obj, index, href, singi = 0, check, check1, check2, target;
    function onRadioButtonChange() {
        check1 = document.form1.radio1.checked;
        check2 = document.form1.radio2.checked;


        target = document.getElementById("output");

        if (check1 == true) {
            singi = 1;
        }
        else if (check2 == true) {
            singi = 2;
        }

    }

    function show() {


        daiya1 = document.getElementById('daiya1');
        daiya2 = document.getElementById('daiya2');
        hukidasi = document.getElementById('hukidasi');
        yobi = document.getElementById('yobi');
        zikan = new Date();
        hour = zikan.getHours();
        minutes = zikan.getMinutes();
        second = zikan.getSeconds();
        day = zikan.getDay();

        zikoku = document.getElementById('itiran');
        genzai = document.getElementById('genzai');
        genzai.textContent = hour + "時 " + minutes + "分 " + second + "秒";
        hour = hour - 6;
        switch (youbi) {
            case 6:
                check = "土曜(" + youbi[day] + ")";
                break;
            case 0:
                check = "休日(" + youbi[day] + ")";
                break;
            default:
                check = "平日(" + youbi[day] + ")";
                break;
        }

        if (singi == 1) {
            hukidasi.style.color = "green";
            hukidasi.textContent = ("宝塚行");

            if (hour == -6) { hour = 18 }
            var day = zikan.getDay(),
                hiniti = zikan.getDate(),
                month = zikan.getMonth();

            month_keisan = month - 8;

            if (day == 0 || hiniti == shukuzitu[month_keisan][0] || hiniti == shukuzitu[month_keisan][1]) {


                if (minutes > 45) { ikou(kyuzitu2); }
                else { hudan(kyuzitu2); }
                if (hour == 18 || hour >= -5 && hour <= -1) { igai(); }

            }
            else if (day == 6) {
                if (minutes > 45) {
                zikoku.textContent = hour + 6 + "時"; daiya1.textContent = kyuzitu2[hour];
                    if (hour != 18) { yobi.textContent = hour + 7 + "時"; daiya2.textContent = kyuzitu2[hour + 1]; }
                } else { hudan(kyuzitu2); }
                if (hour >= -5 && hour <= -1) { igai(); }
            } else {

                if (minutes > 45) { ikou(heizitu2) } else { hudan(heizitu2) }
                if (hour >= -5 && hour <= -1) { igai(); }
            }
        } else if (singi == 2) {
            hukidasi.style.color = "green";
            hukidasi.textContent = ("すみれガ丘東行");
            if (hour == -6) { hour = 18 }
            var day = zikan.getDay(),
                hiniti = zikan.getDate(),
                month = zikan.getMonth();

            month_keisan = month - 8;

            if (day == 0 || hiniti == shukuzitu[month_keisan][0] || hiniti == shukuzitu[month_keisan][1]) {

                if (minutes > 45) { ikou(kyuzitu); }
                else { hudan(kyuzitu); }
                if (hour >= -5 && hour <= -1) { igai(); }

            }
            else if (day == 6) {
                if (minutes > 45) {
                zikoku.textContent = hour + 6 + "時"; daiya1.textContent = doyou[hour];
                    yobi.textContent = hour + 7 + "時"; daiya2.textContent = doyou[hour + 1];
                } else { hudan(doyou); }
                if (hour >= -5 && hour <= -1) { igai(); }
            } else {

                if (minutes > 45) { ikou(heizitu) } else { hudan(heizitu) }
                if (hour >= -5 && hour <= -1) { igai(); }
            }
        } else {
            hukidasi.textContent = "選択してください";
            hukidasi.style.color = "red";
        }

    }
    setInterval('show()', 1000);
    function kousin() {
        location.reload()
    }

</script>


</html>